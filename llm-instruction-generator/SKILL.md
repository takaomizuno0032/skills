---
name: llm-instruction-generator
version: 1.0.0
description: 別のLLMに作業を依頼するための実行可能な指示書（Markdown）を生成する
triggers:
  - llm-instruction
  - llm指示書
  - instruction
  - 指示書生成
---

# LLM指示書ジェネレーター

## 概要

このスキルは、別のLLMセッション（Claude、GPT等）に作業を依頼するための**自己完結型の指示書**を生成する。

### 使用場面

- 複数のLLMセッションで並列作業を行う場合
- 別の開発者がLLMを使って作業を継続する場合
- 複雑な作業をドキュメント化して再利用可能にする場合
- サーバー側とクライアント側で別のLLMが作業する場合

### 主な特徴

- **自己完結性**: 指示書を読むだけで、他のファイルを参照せずに作業が可能
- **具体的なコード例**: コピー&ペーストで使える実装例を含む
- **段階的な手順**: 初心者でも迷わない詳細なステップバイステップ
- **チェックリスト**: 作業完了の確認項目を提供

---

## 入力パラメータ

### 必須パラメータ

| パラメータ | 説明 | 例 |
|-----------|------|-----|
| `repository_path` | 対象リポジトリのパス | `/Users/user/Projects/my-app` |
| `task_objective` | 作業の目的・ゴール | `swagger-jsdoc導入`、`API統合`、`テスト追加` |

### 任意パラメータ

| パラメータ | 説明 | 例 |
|-----------|------|-----|
| `tech_stack` | 技術スタック情報（既知の場合） | `TypeScript, Express.js, MongoDB` |
| `output_path` | 指示書の出力先 | `./docs/llm_instruction.md` |
| `scope` | 作業範囲の限定 | `src/routes.ts のみ`、`認証関連のみ` |
| `constraints` | 制約条件 | `既存コードを変更しない`、`パッケージ追加禁止` |

---

## プロセス

指示書生成は以下の4ステップで行う。

### Step 1: リポジトリ調査

対象リポジトリの構造を把握する。

```
調査項目:
- ディレクトリ構造（主要フォルダの役割）
- エントリーポイント（index.ts, main.dart 等）
- 設定ファイル（package.json, pubspec.yaml, tsconfig.json 等）
- 既存のドキュメント（README.md 等）
```

**調査コマンド例**:
```bash
# ディレクトリ構造
ls -la $repository_path
tree -L 3 $repository_path

# パッケージ情報
cat $repository_path/package.json  # Node.js
cat $repository_path/pubspec.yaml  # Flutter/Dart
```

### Step 2: 技術スタック把握

使用言語、フレームワーク、主要ライブラリを特定する。

```
把握項目:
- プログラミング言語とバージョン
- Webフレームワーク（Express, Flask, Flutter 等）
- 状態管理（Redux, Riverpod, Provider 等）
- HTTPクライアント（axios, dio, http 等）
- コード生成ツール（Freezed, json_serializable 等）
- テストフレームワーク（Jest, pytest, flutter_test 等）
```

### Step 3: 手順生成

作業目的に応じた具体的な手順を生成する。

```
手順の粒度:
- 1ステップ = 1つの明確なアクション
- コマンドは実行可能な形式で記載
- ファイルパスは絶対パスで指定
- 「なぜこの手順が必要か」の説明を添える
```

### Step 4: コード例作成

コピー&ペーストで使える実装例を作成する。

```
コード例の要件:
- 実際のファイルパスを使用
- プレースホルダーは最小限に
- 既存コードのパターンに合わせる
- エラーハンドリングを含む
```

---

## 出力形式

### 指示書の構成

```markdown
# [作業タイトル]

> **対象リポジトリ**: `[repository_path]`
> **担当**: [担当者/LLMの役割]
> **最終更新**: [日付]

---

## 1. 作業の目的

### 1.1 背景
[なぜこの作業が必要か]

### 1.2 目標
[達成すべきゴール]

### 1.3 採用方式
[技術的アプローチの概要]

---

## 2. 対象ディレクトリ・ファイル

### 2.1 ディレクトリ構成
[関連するディレクトリの説明]

### 2.2 対象ファイル一覧
[修正/追加するファイルのリスト]

---

## 3. 導入手順

### 3.1 [ステップ1のタイトル]
[詳細な手順とコマンド]

### 3.2 [ステップ2のタイトル]
[詳細な手順とコマンド]

（以下、必要なステップを追加）

---

## 4. コード例

### 4.1 [ファイル名1]
[コードブロック]

### 4.2 [ファイル名2]
[コードブロック]

---

## 5. 作業の進め方

### 5.1 優先度付け
[どの順序で作業すべきか]

### 5.2 注意事項
[避けるべきこと、推奨すること]

---

## 6. 完了後の確認事項

### 6.1 チェックリスト
- [ ] [確認項目1]
- [ ] [確認項目2]
- [ ] [確認項目N]

### 6.2 動作確認
[テストコマンド、確認手順]

---

## 付録: 参考資料

- [関連ドキュメントへのリンク]
- [使用ツールの公式ドキュメント]
```

### 自己完結性の原則

指示書は以下を満たすこと:

1. **外部参照不要**: 他のファイル（result.md等）を読まなくても作業可能
2. **コンテキスト完備**: 背景・目的・技術情報が全て記載されている
3. **実行可能なコード**: コピー&ペーストで動作するコード例
4. **明確なゴール**: 何をもって完了とするかが明確

---

## 使用例

### 例1: サーバー側へのswagger-jsdoc導入

**入力**:
```
repository_path: /Users/user/Projects/api-server
task_objective: swagger-jsdocを導入し、OpenAPI仕様を自動生成する
tech_stack: TypeScript, Express.js
```

**生成される指示書**: `llm_instruction_server.md`
- swagger-jsdocのインストール手順
- 設定ファイルの作成方法
- JSDocコメントの書き方（具体例付き）
- OpenAPI仕様ファイルの生成スクリプト

### 例2: クライアント側のAPIクライアント生成

**入力**:
```
repository_path: /Users/user/Projects/flutter-app
task_objective: OpenAPI仕様からDartクライアントを自動生成する
tech_stack: Flutter, Dart, Riverpod, Freezed
```

**生成される指示書**: `llm_instruction_client.md`
- openapi-generatorのセットアップ手順
- 設定ファイルの作成方法
- 既存のFreezedモデルとの統合方法（DTO/ドメインモデル分離パターン）
- Riverpodプロバイダーの設定

### 参考実装

以下のファイルは、このスキルで生成された指示書の実例:

- `/Users/takaomizuno/multi-agent-shogun/llm_instruction_server.md` - サーバー側swagger-jsdoc導入
- `/Users/takaomizuno/multi-agent-shogun/llm_instruction_client.md` - クライアント側openapi-generator導入

---

## 品質チェックリスト

生成した指示書が以下を満たしているか確認:

### 自己完結性
- [ ] 背景と目的が明記されている
- [ ] 技術スタックが明示されている
- [ ] 対象ファイルのパスが全て記載されている

### 実行可能性
- [ ] コマンドはコピー&ペーストで実行可能
- [ ] コード例は構文エラーがない
- [ ] ファイルパスは実際の環境に合っている

### 完全性
- [ ] 全ての手順が漏れなく記載されている
- [ ] エラーハンドリングや注意事項が含まれている
- [ ] 完了確認のチェックリストがある

### 可読性
- [ ] 見出しの階層が適切
- [ ] コードブロックに言語指定がある
- [ ] 表やリストで情報が整理されている

---

## 注意事項

### DO（推奨）

- リポジトリの実際の構造を調査してから指示書を作成する
- 既存コードのパターン・命名規則に合わせたコード例を提供する
- 段階的に作業できるようPhase分けする
- 「なぜ」この手順が必要かを説明する

### DON'T（非推奨）

- 調査せずに一般的な指示書を生成する
- プレースホルダーだらけの抽象的なコード例
- 「適宜修正してください」のような曖昧な指示
- 既存コードとスタイルが異なるコード例
