---
name: pr-description
version: 1.0.0
description: PRに記載する文章をpr.mdとしてプロジェクトのルート配下に出力する
triggers:
  - pr
  - PR
  - プルリクエスト
  - pull request
  - pr.md
---

# PR Description Generator

実装完了後にPR用の説明文を `pr.md` としてプロジェクトルートに出力するスキル。

## 実行手順

### 1. ブランチの分岐元を特定する

```bash
git merge-base HEAD main
```

### 2. 差分を取得する

```bash
# 変更ファイル一覧
git diff --stat $(git merge-base HEAD main)..HEAD

# 変更内容の詳細
git diff $(git merge-base HEAD main)..HEAD

# コミット履歴
git log --oneline $(git merge-base HEAD main)..HEAD
```

### 3. 会話の振り返り

ここまでの会話を振り返り、以下を整理する:

- ユーザーからの指示・要件
- 実装中に行った判断や選択
- 実行したテストとその結果
- 発見した既存の問題（今回の変更とは無関係なもの）

### 4. pr.md を作成する

プロジェクトルートに `pr.md` を以下の構成で作成する。

```markdown
## 概要

<!-- 1〜2文で変更の目的を簡潔に記述 -->

## 詳細

<!-- 実装内容の詳細を箇条書きで記述 -->
<!-- なぜその方針にしたのか、判断理由も含める -->

### 変更ファイル

<!-- 変更・追加したファイルと、各ファイルの変更内容を記述 -->

| ファイル | 変更内容 |
|---------|---------|
| `path/to/file` | 変更の説明 |

### 考慮事項

<!-- 以下のような点を記述 -->
<!-- - 既存機能への影響 -->
<!-- - 今回の変更に含めなかった関連事項 -->
<!-- - 既知の制限事項 -->
<!-- - 特になければ「特になし」 -->

### 実行したテスト

<!-- 実行したテストコマンドとその結果を記述 -->
<!-- 既存テストの失敗が今回の変更と無関係な場合はその旨を明記 -->

- [ ] テスト項目1
- [ ] テスト項目2
```

## 注意事項

- 差分は `main` ブランチとの比較を基本とする
- 自動生成ファイル（`.g.dart`, `.freezed.dart` 等）は変更ファイル一覧に含めるが、詳細説明は不要
- 既存のpr.mdがある場合は上書きする
- 会話中にユーザーが行った指示や判断を正確に反映する
